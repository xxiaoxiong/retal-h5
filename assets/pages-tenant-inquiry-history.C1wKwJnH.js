import{d as t,r as e,o as a,a as r,c as s,w as n,i,b as l,e as o,f as u,n as g,g as c,y as d,j as p,F as y,k as f,t as _,u as S}from"./index-BWYHzEly.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=D(t({__name:"inquiry-history",setup(t){const D=e(!0),h=e([]);a((()=>{$()}));const $=async()=>{D.value=!0;try{await new Promise((t=>setTimeout(t,1e3))),h.value=[{id:"1",propertyId:"101",propertyTitle:"阳光花园两室一厅",lastMessage:"请问这个房子朝向如何？",createdAt:Date.now()-864e5},{id:"2",propertyId:"102",propertyTitle:"江景豪华套房",lastMessage:"这个房子什么时候可以看？",createdAt:Date.now()-2592e5}]}catch(t){console.error("获取咨询历史失败:",t),r({title:"获取历史记录失败",icon:"none"})}finally{D.value=!1}},m=t=>t?function(t){if(!t)return"";t instanceof Date||(t=new Date(t));const e=new Date,a=e.getTime()-t.getTime();if(a<864e5&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear())return`今天 ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`;const r=new Date(e);if(r.setDate(r.getDate()-1),r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear())return`昨天 ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`;if(a<6048e5)return`${["周日","周一","周二","周三","周四","周五","周六"][t.getDay()]} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`;if(e.getFullYear()===t.getFullYear())return`${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}(new Date(t)):"",M=()=>{S({url:"/pages/tenant/property-list"})};return(t,e)=>{const a=g,r=i,$=l("uni-icons"),v=d;return o(),s(r,{class:"inquiry-history-page"},{default:n((()=>[u(r,{class:"page-header"},{default:n((()=>[u(a,{class:"page-title"},{default:n((()=>[c("咨询历史")])),_:1})])),_:1}),u(r,{class:"content-section"},{default:n((()=>[D.value?(o(),s(r,{key:0,class:"loading"},{default:n((()=>[u($,{type:"spinner-cycle",size:"30",color:"#2196f3"}),u(a,null,{default:n((()=>[c("加载中...")])),_:1})])),_:1})):0===h.value.length?(o(),s(r,{key:1,class:"empty-state"},{default:n((()=>[u($,{type:"chat",size:"50",color:"#ccc"}),u(a,null,{default:n((()=>[c("暂无咨询记录")])),_:1}),u(v,{class:"action-button",onClick:M},{default:n((()=>[c(" 去看房源 ")])),_:1})])),_:1})):(o(),s(r,{key:2,class:"inquiry-list"},{default:n((()=>[(o(!0),p(y,null,f(h.value,((t,e)=>(o(),s(r,{class:"inquiry-item",key:e,onClick:e=>{return a=t.id,void S({url:`/pages/inquiry/chat?inquiryId=${a}`});var a}},{default:n((()=>[u(r,{class:"inquiry-content"},{default:n((()=>[u(a,{class:"inquiry-title"},{default:n((()=>[c(_(t.propertyTitle||"未知房源"),1)])),_:2},1024),u(a,{class:"inquiry-time"},{default:n((()=>[c(_(m(t.createdAt)),1)])),_:2},1024),u(a,{class:"inquiry-preview"},{default:n((()=>[c(_(t.lastMessage||"暂无消息"),1)])),_:2},1024)])),_:2},1024),u($,{type:"right",size:"16",color:"#999"})])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1})])),_:1})}}}),[["__scopeId","data-v-38effcc6"]]);export{h as default};

import{d as a,r as e,H as l,x as s,a as t,c as i,w as u,i as r,e as c,g as n,f as o,S as d,j as p,q as f,F as _,k as v,l as m,m as y,t as g,n as b,y as k,u as h}from"./index-BWYHzEly.js";import{g as w}from"./request.DW5hqJBG.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const q=j(a({__name:"property-detail",setup(a){const j=e(""),q=e(null),x=e(!0),F={wifi:"WiFi",parking:"停车位",ac:"空调",heat:"暖气",washer:"洗衣机",kitchen:"厨房",tv:"电视",elevator:"电梯",refrigerator:"冰箱",microwave:"微波炉",balcony:"阳台",furniture:"家具齐全"},$=l((()=>{var a;return(null==(a=q.value)?void 0:a.amenities)||[]})),C=()=>{q.value&&h({url:`/pages/tenant/appointment?property_id=${q.value.id}`})},I=()=>{q.value&&h({url:`/pages/tenant/inquiry?property_id=${q.value.id}&landlord_id=${q.value.landlord_id}`})};return s((a=>{a&&a.id?(j.value=a.id,(async()=>{if(j.value){x.value=!0;try{const a=await w(`/properties/public/${j.value}`);a&&a.success&&a.property?q.value=a.property:a&&a.data?q.value=a.data:a&&!a.success?t({title:a.message||"获取房源详情失败",icon:"none"}):t({title:"获取房源详情失败",icon:"none"})}catch(a){t({title:"获取房源详情失败",icon:"none"})}finally{x.value=!1}}})()):(x.value=!1,t({title:"未指定房源ID",icon:"none"}))})),(a,e)=>{const l=r,s=y,t=m,h=d,w=b,j=k;return c(),i(l,{class:"property-detail-page"},{default:u((()=>[x.value?(c(),i(l,{key:0,class:"loading"},{default:u((()=>[n("加载中...")])),_:1})):q.value?(c(),i(l,{key:2,class:"property-content"},{default:u((()=>[o(h,{class:"image-swiper","indicator-dots":!0,autoplay:!0,interval:4e3,duration:500},{default:u((()=>[(c(!0),p(_,null,v(q.value.images,((a,e)=>(c(),i(t,{key:e},{default:u((()=>[o(s,{src:a,mode:"aspectFill",class:"property-image"},null,8,["src"])])),_:2},1024)))),128)),q.value.images&&0!==q.value.images.length?f("",!0):(c(),i(t,{key:0},{default:u((()=>[o(s,{src:"./static/no-image.png",mode:"aspectFill",class:"property-image"})])),_:1}))])),_:1}),o(l,{class:"property-header"},{default:u((()=>[o(l,{class:"property-title"},{default:u((()=>[n(g(q.value.title),1)])),_:1}),o(l,{class:"property-price"},{default:u((()=>[n("¥"+g(q.value.price_per_month)+"/月",1)])),_:1})])),_:1}),o(l,{class:"property-info"},{default:u((()=>[o(l,{class:"info-row"},{default:u((()=>[o(l,{class:"info-item"},{default:u((()=>[o(w,{class:"label"},{default:u((()=>[n("区域")])),_:1}),o(w,{class:"value"},{default:u((()=>[n(g(q.value.district),1)])),_:1})])),_:1}),o(l,{class:"info-item"},{default:u((()=>[o(w,{class:"label"},{default:u((()=>[n("面积")])),_:1}),o(w,{class:"value"},{default:u((()=>[n(g(q.value.area_sqm)+"㎡",1)])),_:1})])),_:1}),o(l,{class:"info-item"},{default:u((()=>[o(w,{class:"label"},{default:u((()=>[n("户型")])),_:1}),o(w,{class:"value"},{default:u((()=>[n(g(q.value.bedrooms)+"室"+g(q.value.bathrooms)+"卫",1)])),_:1})])),_:1})])),_:1}),o(l,{class:"info-row"},{default:u((()=>[o(l,{class:"info-item"},{default:u((()=>[o(w,{class:"label"},{default:u((()=>[n("类型")])),_:1}),o(w,{class:"value"},{default:u((()=>[n(g(q.value.property_type),1)])),_:1})])),_:1}),o(l,{class:"info-item"},{default:u((()=>[o(w,{class:"label"},{default:u((()=>[n("状态")])),_:1}),o(w,{class:"value"},{default:u((()=>[n(g("available"===q.value.status?"可租":"已租"),1)])),_:1})])),_:1})])),_:1})])),_:1}),o(l,{class:"address-section"},{default:u((()=>[o(l,{class:"section-title"},{default:u((()=>[n("房源地址")])),_:1}),o(l,{class:"address"},{default:u((()=>[n(g(q.value.city)+" "+g(q.value.district)+" "+g(q.value.address),1)])),_:1})])),_:1}),o(l,{class:"description-section"},{default:u((()=>[o(l,{class:"section-title"},{default:u((()=>[n("房源描述")])),_:1}),o(l,{class:"description"},{default:u((()=>[n(g(q.value.description||"暂无描述"),1)])),_:1})])),_:1}),o(l,{class:"amenities-section"},{default:u((()=>[o(l,{class:"section-title"},{default:u((()=>[n("房屋设施")])),_:1}),o(l,{class:"amenities-list"},{default:u((()=>[(c(!0),p(_,null,v($.value,((a,e)=>(c(),i(l,{key:e,class:"amenity-tag"},{default:u((()=>{return[n(g((e=a,F[e]||e)),1)];var e})),_:2},1024)))),128)),q.value.amenities&&0!==q.value.amenities.length?f("",!0):(c(),i(l,{key:0,class:"no-amenities"},{default:u((()=>[n(" 暂无设施信息 ")])),_:1}))])),_:1})])),_:1}),o(l,{class:"action-buttons"},{default:u((()=>[o(j,{onClick:C,class:"appointment-btn"},{default:u((()=>[n(" 预约看房 ")])),_:1}),o(j,{onClick:I,class:"contact-btn"},{default:u((()=>[n("联系房东")])),_:1})])),_:1})])),_:1})):(c(),i(l,{key:1,class:"error"},{default:u((()=>[n("未找到房源信息")])),_:1}))])),_:1})}}}),[["__scopeId","data-v-48a38d67"]]);export{q as default};

import{d as a,r as e,o as l,c as s,w as t,z as n,A as u,u as i,i as d,e as o,f as c,g as r,n as p,t as _,y as f}from"./index-BWYHzEly.js";import{g as m}from"./request.DW5hqJBG.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=v(a({__name:"dashboard",setup(a){const v=e({total_properties:0,available_properties:0,total_views:0,total_inquiries:0,total_appointments:0,pending_appointments:0,upcoming_appointments:0,recent_inquiries:0,recent_appointments:0}),g=e(!1),k=e(""),b=e(!1),C=async()=>{g.value=!0,k.value="",b.value=!1;try{if(!n("token"))return k.value="未找到认证信息，请先登录",void q();const a=await m("/stats/overview");a&&a.success?a.stats?v.value=a.stats:(k.value="API返回数据格式不包含stats字段",q()):a&&"object"==typeof a&&"total_properties"in a?v.value=a:(a&&!a.success?k.value="服务器返回错误":k.value="获取数据失败，格式不正确",q())}catch(a){k.value="无法连接到服务器，使用本地数据进行展示",q()}finally{g.value=!1}},q=()=>{b.value=!0,v.value={total_properties:15,available_properties:12,total_views:150,total_inquiries:25,total_appointments:8,pending_appointments:3,upcoming_appointments:2,recent_inquiries:5,recent_appointments:1}},w=a=>{i({url:a})};return l((()=>{n("token")||(u({title:"未登录",content:"您尚未登录或登录已过期，是否前往登录页面？",success:a=>{a.confirm&&i({url:"/pages/landlord/login"})}}),0)?C():q()})),(a,e)=>{const l=d,n=p,u=f;return o(),s(l,{class:"landlord-dashboard-page"},{default:t((()=>[c(l,{class:"header"},{default:t((()=>[c(l,{class:"welcome-message"},{default:t((()=>[r("欢迎回来，房东！")])),_:1})])),_:1}),g.value?(o(),s(l,{key:0,class:"loading-container"},{default:t((()=>[c(l,{class:"loading-spinner"}),c(n,{class:"loading-text"},{default:t((()=>[r("加载中...")])),_:1})])),_:1})):k.value?(o(),s(l,{key:1,class:"error-container"},{default:t((()=>[c(n,{class:"error-message"},{default:t((()=>[r(_(k.value),1)])),_:1}),c(u,{onClick:C,class:"retry-button"},{default:t((()=>[r("重试")])),_:1})])),_:1})):(o(),s(l,{key:2},{default:t((()=>[c(l,{class:"stats-grid"},{default:t((()=>[c(l,{class:"stat-card",onClick:e[0]||(e[0]=a=>w("/pages/landlord/properties"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.total_properties||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("总房源数")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[1]||(e[1]=a=>w("/pages/landlord/properties"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.available_properties||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("可出租房源")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[2]||(e[2]=a=>w("/pages/landlord/properties"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.total_views||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("总浏览量")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[3]||(e[3]=a=>w("/pages/landlord/inquiries"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.total_inquiries||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("总咨询数")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[4]||(e[4]=a=>w("/pages/landlord/appointments"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.total_appointments||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("总预约数")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[5]||(e[5]=a=>w("/pages/landlord/appointments"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.pending_appointments||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("待处理预约")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[6]||(e[6]=a=>w("/pages/landlord/appointments"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.upcoming_appointments||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("即将到来的预约")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[7]||(e[7]=a=>w("/pages/landlord/inquiries"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.recent_inquiries||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("最近咨询")])),_:1})])),_:1}),c(l,{class:"stat-card",onClick:e[8]||(e[8]=a=>w("/pages/landlord/appointments"))},{default:t((()=>[c(l,{class:"value"},{default:t((()=>[r(_(v.value.recent_appointments||0),1)])),_:1}),c(l,{class:"label"},{default:t((()=>[r("最近预约")])),_:1})])),_:1})])),_:1}),c(l,{class:"quick-links"},{default:t((()=>[c(l,{class:"section-title"},{default:t((()=>[r("管理中心")])),_:1}),c(l,{class:"menu-list"},{default:t((()=>[c(l,{class:"menu-item",onClick:e[9]||(e[9]=a=>w("/pages/landlord/properties"))},{default:t((()=>[c(n,{class:"menu-title"},{default:t((()=>[r("房源管理")])),_:1}),c(n,{class:"arrow"},{default:t((()=>[r(">")])),_:1})])),_:1}),c(l,{class:"menu-item",onClick:e[10]||(e[10]=a=>w("/pages/landlord/inquiries"))},{default:t((()=>[c(n,{class:"menu-title"},{default:t((()=>[r("咨询记录")])),_:1}),c(n,{class:"arrow"},{default:t((()=>[r(">")])),_:1})])),_:1}),c(l,{class:"menu-item",onClick:e[11]||(e[11]=a=>w("/pages/landlord/appointments"))},{default:t((()=>[c(n,{class:"menu-title"},{default:t((()=>[r("预约管理")])),_:1}),c(n,{class:"arrow"},{default:t((()=>[r(">")])),_:1})])),_:1}),c(l,{class:"menu-item",onClick:e[12]||(e[12]=a=>w("/pages/landlord/banner-management"))},{default:t((()=>[c(n,{class:"menu-title"},{default:t((()=>[r("轮播图管理")])),_:1}),c(n,{class:"arrow"},{default:t((()=>[r(">")])),_:1})])),_:1})])),_:1})])),_:1}),c(l,{class:"data-source"},{default:t((()=>[b.value?(o(),s(n,{key:0,class:"using-backup"},{default:t((()=>[r("使用本地模拟数据显示")])),_:1})):(o(),s(n,{key:1,class:"using-real"},{default:t((()=>[r("使用接口数据显示")])),_:1}))])),_:1})])),_:1}))])),_:1})}}}),[["__scopeId","data-v-d928c479"]]);export{g as default};
